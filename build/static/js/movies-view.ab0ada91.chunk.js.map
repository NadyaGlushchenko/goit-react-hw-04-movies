{"version":3,"sources":["components/SearchBar/SearchBar.js","views/MoviesPage/MoviesPage.js","services/apiService.js","services/status.js","img/error.png","components/ErrorView/ErrorView.js","img/no-image.jpg","services/stylesPagination.js","components/ErrorView/ErrorView.module.css","components/SearchBar/SearchBar.module.css","views/MoviesPage/MoviesPage.module.css"],"names":["SearchBar","onHandleSubmit","useState","query","setQuery","className","s","form","onSubmit","e","preventDefault","trim","toast","info","input","type","value","autoComplete","autoFocus","placeholder","onChange","target","btn","label","MoviesPage","classes","useStyles","history","useHistory","location","useLocation","url","useRouteMatch","totalPage","setTotalPage","movies","setMovies","error","setError","Status","IDLE","status","setStatus","page","URLSearchParams","search","get","useEffect","newSearch","PENDING","apiService","then","results","total_pages","length","REJECTED","RESOLVED","catch","console","log","message","main","push","LoaderComponent","ErrorView","moviesList","map","movie","moviesItem","to","pathname","string","title","id","slugify","lower","state","from","src","poster_path","noImageFound","alt","poster","movieTitle","Pagination","root","count","event","Number","showFirstButton","showLastButton","size","BASE_URL","API_KEY","a","config","fetch","response","ok","json","Promise","reject","Error","getTrending","searchMovies","getMovieDetails","movieId","getMovieCredits","getMovieReviews","role","wrapper","errorImage","width","img","text","makeStyles","display","justifyContent","backgroundColor","color","opacity","module","exports"],"mappings":"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","file":"static/js/movies-view.ab0ada91.chunk.js","sourcesContent":["import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport propTypes from 'prop-types';\nimport s from './SearchBar.module.css';\n\nfunction SearchBar({ onHandleSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const onSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      return toast.info('ðŸ˜± Please enter a value for search movies!');\n    }\n    onHandleSubmit(query.trim());\n    setQuery('');\n  };\n\n  return (\n    <form className={s.form} onSubmit={onSubmit}>\n      <input\n        className={s.input}\n        type=\"text\"\n        value={query}\n        autoComplete=\"off\"\n        autoFocus\n        placeholder=\"Search movies...\"\n        onChange={({ target }) => setQuery(target.value)}\n      />\n      <button type=\"submit\" className={s.btn}>\n        <span className={s.label}>Search</span>\n      </button>\n    </form>\n  );\n}\n\nSearchBar.propTypes = {\n  onHandleSubmit: propTypes.func.isRequired,\n};\n\nexport default SearchBar;\n","import { useState, useEffect } from 'react';\nimport { Link, useRouteMatch, useHistory, useLocation } from 'react-router-dom';\nimport * as apiService from '../../services/apiService';\nimport slugify from 'slugify';\nimport { Pagination } from '@material-ui/lab';\nimport useStyles from '../../services/stylesPagination';\nimport Status from '../../services/status';\nimport LoaderComponent from '../../components/LoaderComponent';\nimport ErrorView from '../../components/ErrorView';\nimport SearchBar from '../../components/SearchBar';\nimport noImageFound from '../../img/no-image.jpg';\nimport s from './MoviesPage.module.css';\n\nconst makeSlug = string => slugify(string, { lower: true });\n\nfunction MoviesPage() {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation();\n  const { url } = useRouteMatch();\n  const [query, setQuery] = useState('');\n  const [totalPage, setTotalPage] = useState(0);\n  const [movies, setMovies] = useState(null);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n\n  const page = new URLSearchParams(location.search).get('page') ?? 1;\n\n  useEffect(() => {\n    if (location.search === '') {\n      return;\n    }\n\n    const newSearch = new URLSearchParams(location.search).get('query');\n    setQuery(newSearch, page);\n  }, [location.search, page]);\n\n  useEffect(() => {\n    if (!query) return;\n    setStatus(Status.PENDING);\n    apiService\n      .searchMovies(query, page)\n      .then(({ results, total_pages }) => {\n        if (results.length === 0) {\n          setError(`No results were found for ${query}!`);\n          setStatus(Status.REJECTED);\n          return;\n        }\n\n        setMovies(results);\n        setTotalPage(total_pages);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        console.log(error);\n        setError(error.message);\n        setStatus(Status.REJECTED);\n      });\n  }, [query, page]);\n\n  const searchImages = newSearch => {\n    if (query === newSearch) return;\n    setQuery(newSearch);\n    setMovies(null);\n    setError(null);\n    setStatus(Status.IDLE);\n    history.push({ ...location, search: `query=${newSearch}&page=1` });\n  };\n\n  const onHandlePage = (event, page) => {\n    history.push({ ...location, search: `query=${query}&page=${page}` });\n  };\n\n  return (\n    <main className={s.main}>\n      <SearchBar onHandleSubmit={searchImages} />\n\n      {status === Status.PENDING && <LoaderComponent />}\n\n      {status === Status.REJECTED && <ErrorView message={error} />}\n\n      {status === Status.RESOLVED && (\n        <>\n          <ul className={s.moviesList}>\n            {movies.map(movie => (\n              <li key={movie.id} className={s.moviesItem}>\n                <Link\n                  to={{\n                    pathname: `${url}/${makeSlug(\n                      `${movie.title} ${movie.id}`,\n                    )}`,\n                    state: { from: location },\n                  }}\n                >\n                  <img\n                    src={\n                      movie.poster_path\n                        ? `https://image.tmdb.org/t/p/w500/${movie.poster_path}`\n                        : noImageFound\n                    }\n                    alt={movie.title}\n                    className={s.poster}\n                  />\n                </Link>\n                <span className={s.movieTitle}>{movie.title}</span>\n              </li>\n            ))}\n          </ul>\n          {totalPage > 1 && (\n            <Pagination\n              className={classes.root}\n              count={totalPage}\n              onChange={onHandlePage}\n              page={Number(page)}\n              showFirstButton\n              showLastButton\n              size=\"large\"\n            />\n          )}\n        </>\n      )}\n    </main>\n  );\n}\n\nexport default MoviesPage;\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '6914e86918040074e2fe382ba8e8cb5e';\n\nasync function apiService(url = '', config = {}) {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(\n        new Error('404 The resource you requested could not be found ðŸ¥º'),\n      );\n}\n\nexport function getTrending(page) {\n  return apiService(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`,\n  );\n}\n\nexport function searchMovies(query, page) {\n  return apiService(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${query}&page=${page}`,\n  );\n}\n\nexport function getMovieDetails(movieId) {\n  return apiService(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);\n}\n\nexport function getMovieCredits(movieId) {\n  return apiService(`${BASE_URL}/movie/${movieId}/credits?api_key=${API_KEY}`);\n}\n\nexport function getMovieReviews(movieId, page) {\n  return apiService(\n    `${BASE_URL}/movie/${movieId}/reviews?api_key=${API_KEY}&page=${page}`,\n  );\n}\n","const Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default Status;\n","export default __webpack_public_path__ + \"static/media/error.ecc6f277.png\";","import PropTypes from 'prop-types';\nimport errorImage from '../../img/error.png';\nimport s from './ErrorView.module.css';\n\nfunction ErrorView({ message }) {\n  return (\n    <div role=\"alert\" className={s.wrapper}>\n      <img src={errorImage} width=\"650\" alt=\"sadcat\" className={s.img} />\n      <p text={message} className={s.text}>\n        {message}\n      </p>\n    </div>\n  );\n}\n\nErrorView.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default ErrorView;\n","export default __webpack_public_path__ + \"static/media/no-image.8fbb00d8.jpg\";","import { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    '& .MuiPaginationItem-page.Mui-selected, & .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible,  & .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\n      backgroundColor: '#fa7584',\n    },\n    '& .MuiPaginationItem-root': {\n      color: '#fff',\n    },\n    '& .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\n      opacity: '0.7',\n    },\n    '& .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible': {\n      opacity: '1',\n    },\n    '& .MuiPagination-ul': {\n      justifyContent: 'center',\n    },\n  },\n});\n\nexport default useStyles;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ErrorView_wrapper__1YN3X\",\"img\":\"ErrorView_img__3uz1D\",\"text\":\"ErrorView_text__22naq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchBar_form__2wxHV\",\"input\":\"SearchBar_input__2dH3l\",\"label\":\"SearchBar_label__2JvpF\",\"btn\":\"SearchBar_btn__2csTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"MoviesPage_main__20L16\",\"moviesList\":\"MoviesPage_moviesList__4gnkF\",\"moviesItem\":\"MoviesPage_moviesItem__3UqRR\",\"poster\":\"MoviesPage_poster__1AOtb\",\"movieTitle\":\"MoviesPage_movieTitle__2TaoL\"};"],"sourceRoot":""}