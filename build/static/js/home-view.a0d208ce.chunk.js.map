{"version":3,"sources":["views/HomePage/HomePage.js","services/apiService.js","services/status.js","img/error.png","components/ErrorView/ErrorView.js","img/no-image.jpg","services/stylesPagination.js","components/ErrorView/ErrorView.module.css","views/HomePage/HomePage.module.css"],"names":["HomePage","classes","useStyles","history","useHistory","location","useLocation","useState","movies","setMovies","totalPage","setTotalPage","error","setError","Status","IDLE","status","setStatus","page","URLSearchParams","search","get","useEffect","PENDING","apiService","then","results","total_pages","RESOLVED","catch","console","log","REJECTED","className","s","main","title","LoaderComponent","ErrorView","message","moviesList","map","movie","moviesItem","to","pathname","string","id","slugify","lower","state","from","src","poster_path","noImageFound","alt","poster","movieTitle","Pagination","root","count","onChange","event","push","Number","showFirstButton","showLastButton","size","BASE_URL","API_KEY","a","url","config","fetch","response","ok","json","Promise","reject","Error","getTrending","searchMovies","query","getMovieDetails","movieId","getMovieCredits","getMovieReviews","role","wrapper","errorImage","width","img","text","makeStyles","display","justifyContent","backgroundColor","color","opacity","module","exports"],"mappings":"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","file":"static/js/home-view.a0d208ce.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport * as apiService from '../../services/apiService';\nimport slugify from 'slugify';\nimport { Pagination } from '@material-ui/lab';\nimport useStyles from '../../services/stylesPagination';\nimport Status from '../../services/status';\nimport LoaderComponent from '../../components/LoaderComponent';\nimport ErrorView from '../../components/ErrorView';\nimport noImageFound from '../../img/no-image.jpg';\nimport s from './HomePage.module.css';\n\nconst makeSlug = string => slugify(string, { lower: true });\n\nfunction HomePage() {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation();\n  const [movies, setMovies] = useState(null);\n  const [totalPage, setTotalPage] = useState(0);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n\n  const page = new URLSearchParams(location.search).get('page') ?? 1;\n\n  useEffect(() => {\n    setStatus(Status.PENDING);\n    apiService\n      .getTrending(page)\n      .then(({ results, total_pages }) => {\n        setMovies(results);\n        setTotalPage(total_pages);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        console.log(error);\n        setError('Something went wrong. Try again.');\n        setStatus(Status.REJECTED);\n      });\n  }, [page]);\n\n  const onHandlePage = (event, page) => {\n    history.push({ ...location, search: `page=${page}` });\n  };\n\n  return (\n    <main className={s.main}>\n      <h1 className={s.title}>Trending today</h1>\n\n      {status === Status.PENDING && <LoaderComponent />}\n\n      {status === Status.REJECTED && <ErrorView message={error.message} />}\n\n      {status === Status.RESOLVED && (\n        <>\n          <ul className={s.moviesList}>\n            {movies.map(movie => (\n              <li key={movie.id} className={s.moviesItem}>\n                <Link\n                  to={{\n                    pathname: `movies/${makeSlug(\n                      `${movie.title} ${movie.id}`,\n                    )}`,\n                    state: { from: location },\n                  }}\n                >\n                  <img\n                    src={\n                      movie.poster_path\n                        ? `https://image.tmdb.org/t/p/w500/${movie.poster_path}`\n                        : noImageFound\n                    }\n                    alt={movie.title}\n                    className={s.poster}\n                  />\n                </Link>\n                <span className={s.movieTitle}>{movie.title}</span>\n              </li>\n            ))}\n          </ul>\n          {totalPage > 1 && (\n            <Pagination\n              className={classes.root}\n              count={totalPage}\n              onChange={onHandlePage}\n              page={Number(page)}\n              showFirstButton\n              showLastButton\n              size=\"large\"\n            />\n          )}\n        </>\n      )}\n    </main>\n  );\n}\n\nexport default HomePage;\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '6914e86918040074e2fe382ba8e8cb5e';\n\nasync function apiService(url = '', config = {}) {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(\n        new Error('404 The resource you requested could not be found ðŸ¥º'),\n      );\n}\n\nexport function getTrending(page) {\n  return apiService(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`,\n  );\n}\n\nexport function searchMovies(query, page) {\n  return apiService(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${query}&page=${page}`,\n  );\n}\n\nexport function getMovieDetails(movieId) {\n  return apiService(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);\n}\n\nexport function getMovieCredits(movieId) {\n  return apiService(`${BASE_URL}/movie/${movieId}/credits?api_key=${API_KEY}`);\n}\n\nexport function getMovieReviews(movieId, page) {\n  return apiService(\n    `${BASE_URL}/movie/${movieId}/reviews?api_key=${API_KEY}&page=${page}`,\n  );\n}\n","const Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default Status;\n","export default __webpack_public_path__ + \"static/media/error.ecc6f277.png\";","import PropTypes from 'prop-types';\nimport errorImage from '../../img/error.png';\nimport s from './ErrorView.module.css';\n\nfunction ErrorView({ message }) {\n  return (\n    <div role=\"alert\" className={s.wrapper}>\n      <img src={errorImage} width=\"650\" alt=\"sadcat\" className={s.img} />\n      <p text={message} className={s.text}>\n        {message}\n      </p>\n    </div>\n  );\n}\n\nErrorView.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default ErrorView;\n","export default __webpack_public_path__ + \"static/media/no-image.8fbb00d8.jpg\";","import { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    '& .MuiPaginationItem-page.Mui-selected, & .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible,  & .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\n      backgroundColor: '#fa7584',\n    },\n    '& .MuiPaginationItem-root': {\n      color: '#fff',\n    },\n    '& .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible': {\n      opacity: '0.7',\n    },\n    '& .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible': {\n      opacity: '1',\n    },\n    '& .MuiPagination-ul': {\n      justifyContent: 'center',\n    },\n  },\n});\n\nexport default useStyles;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ErrorView_wrapper__1YN3X\",\"img\":\"ErrorView_img__3uz1D\",\"text\":\"ErrorView_text__22naq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"HomePage_main__4mqIL\",\"title\":\"HomePage_title__3OVsL\",\"moviesList\":\"HomePage_moviesList__2VHor\",\"moviesItem\":\"HomePage_moviesItem__2izib\",\"poster\":\"HomePage_poster__2Ovpf\",\"movieTitle\":\"HomePage_movieTitle__28Szs\",\"pagination\":\"HomePage_pagination__fK2cE\"};"],"sourceRoot":""}